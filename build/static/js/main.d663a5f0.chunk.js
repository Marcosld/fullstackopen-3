(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},20:function(e,n,t){},38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),u=t.n(o),c=(t(20),t(14)),i=t(2),l=t(3),m=t.n(l),s=(t(38),function(e){var n=e.value,t=e.onUpdate;return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:n,onChange:t}))}),f=function(e){var n=e.onNewPerson,t=Object(a.useState)(""),o=Object(i.a)(t,2),u=o[0],c=o[1],l=Object(a.useState)(""),m=Object(i.a)(l,2),s=m[0],f=m[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n({name:u,number:s}),c(""),f("")}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:u,onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:s,onChange:function(e){return f(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Add")))},d=function(e){var n=e.name,t=e.number,a=e.onDelete;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,n," ",t),r.a.createElement("button",{onClick:a},"delete"))},p=function(e){var n=e.persons,t=e.filter,a=e.onDelete;return n.filter((function(e){return e.name.toUpperCase().includes(t.toUpperCase())})).map((function(e){var n=e.name,t=e.number,o=e.id;return r.a.createElement(d,{key:o,name:n,number:t,onDelete:function(){return a(o,n)}})}))},b=function(e){var n=e.notification;return n?r.a.createElement("div",{className:n.type},n.message):null},h=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],u=Object(a.useState)(""),l=Object(i.a)(u,2),d=l[0],h=l[1],v=Object(a.useState)(null),E=Object(i.a)(v,2),g=E[0],w=E[1];Object(a.useEffect)((function(){m.a.get("/api/persons").then((function(e){return e.data})).then((function(e){return o(e)}))}),[]);var j=function(e){var n=e.name,a=e.id,r=e.number;window.confirm("".concat(n," is already on the phonebook. Update phone number?"))&&function(e,n){return m.a.put("".concat("/api/persons","/").concat(e),n).then((function(e){return e.data}))}(a,{name:n,number:r}).then((function(e){o(t.reduce((function(n,t){return n.concat(t.id!==e.id?t:e)}),[])),w({type:"success",message:"Updated ".concat(n,"!")}),setTimeout((function(){return w(null)}),2e3)})).catch((function(){w({type:"error",message:"Information of ".concat(n," already deleted from server")})}))};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(b,{notification:g}),r.a.createElement(s,{value:d,onUpdate:function(e){return h(e.target.value)}}),r.a.createElement("h2",null,"Add a new"),r.a.createElement(f,{onNewPerson:function(e){var n,a=e.name,r=e.number,u=t.find((function(e){return e.name===a}));u?j({name:a,id:u.id,number:r}):(n={name:a,number:r},m.a.post("/api/persons",n).then((function(e){return e.data}))).then((function(e){o([].concat(Object(c.a)(t),[e])),w({type:"success",message:"Added ".concat(e.name,"!")}),setTimeout((function(){return w(null)}),2e3)})).catch((function(e){var n=e.response;w({type:"error",message:n.data.error}),setTimeout((function(){return w(null)}),2e3)}))}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(p,{filter:d,persons:t,onDelete:function(e,n){window.confirm("Delete ".concat(n,"?"))&&function(e){return m.a.delete("".concat("/api/persons","/").concat(e))}(e).then((function(){return o(t.filter((function(n){return n.id!==e})))}))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(h,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[15,1,2]]]);
//# sourceMappingURL=main.d663a5f0.chunk.js.map